---
import Layout from '../../layouts/Layout.astro';
import { Header } from '../../components/layout/Header';
import { Footer } from '../../components/layout/Footer';
import { Hero } from '../../components/sections/Hero';
import { Services } from '../../components/sections/Services';
import { About } from '../../components/sections/About';
import { Contact } from '../../components/sections/Contact';

export function getStaticPaths() {
  return [
    { params: { lang: 'en' } },
    { params: { lang: 'es' } },
  ];
}

const { lang } = Astro.params;

if (!lang || (lang !== 'en' && lang !== 'es')) {
   return Astro.redirect('/en');
}

import { getLocalizedLandingPageData } from '../../lib/content';

const data = await getLocalizedLandingPageData(lang as 'en' | 'es');

const titles = {
    en: "MRG develops - The Cloud Brewery",
    es: "MRG develops - The Cloud Brewery (ES)"
};
---

<Layout title={titles[lang]} lang={lang}>
	<Header client:load lang={lang} data={data.header} />
	
	<main>
		<Hero client:load data={data.hero} />
		<About client:visible data={data.about} />
		<Services client:visible data={data.services} />
		<Contact client:visible lang={lang} data={data.contact} />
	</main>

	<Footer lang={lang} data={data.footer} />
</Layout>
